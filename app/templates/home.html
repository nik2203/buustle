<!DOCTYPE html>
<html>

<head>
    <title>Social Media Home</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/home.css') }}">
</head>

<body>
    <nav class="navbar">
        <a href="{{ url_for('home') }}" class="navbar-logo">Buustle</a>
        <ul>
            <li><a href="/create_post">Create a Post</a></li>
            <li class="right"><a href='/profile/<user_id>'>Profile</a></li>
            <li class="right"><a href="/notifications">Notifications</a></li>
            <li class="right"><a href="/logout">Logout</a></li>
        </ul>
    </nav>

    <!-- Inside the content section of 'home.html' -->
    <div class="container">
        <div class="content">
            <h1>Home Page</h1>

            <h2>Posts</h2>
            <ul>
                {% if posts %}
                {% for post in posts %}
                <div class="post">
                    <h2>{{ post.Title }}</h2>
                    <p>{{ post.Content }}</p>
                    <div class="buttons">
                        <button>Like</button>
                        <button>Comment</button>
                    </div>
                </div>
                {% endfor %}
                {% else %}
                <li>No posts found</li>
                {% endif %}
            </ul>
        </div>

        <!-- Right section for user requests -->
        <div class="user-requests">
            <h1>Users</h1>
            <ul>
                {% for user in users %}
                <li>
                    <span>{{ user.Username }}</span>
                    <button class="request-button" data-userid="{{ user.UserID }}"
                        onclick="sendFriendRequest('{{ user.UserID }}')">Request</button>
                </li>
                {% endfor %}
            </ul>
        </div>


    </div>
</body>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function sendFriendRequest(UserID) {
        $.ajax({
            type: 'POST',
            url: '/send_friend_request/' + UserID,
            success: function (response) {
                if (response.status === 'success') {
                    alert('Friend request sent successfully.');
                } else {
                    alert('Failed to send friend request.');
                }
            }
        });
    }
</script>


</html>